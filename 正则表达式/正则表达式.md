```js
const phone = /^1[34578][0-9]{9}$/;
```

![img](https://lc-api-gold-cdn.xitu.io/1ce345adabe2cc8b2b96.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

^ 匹配开头

$ 匹配结尾

[] one of(一些列中的一个)

{N} 匹配N次

>  **注释：**以1开头，第二位为3 4 5 7 9 其中一个，以9位（本身1次加重复8次）0-9数字结尾

## 单词边界 \b

/\bis\b/ 匹配两边都是单词边界的位置

![img](https://lc-api-gold-cdn.xitu.io/a774384e61752ce942a0.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

## URL分组替换

```
/http:(\/\/.+\.jpg)/
```

`()`括弧代表分组，上面的表单时代表匹配http:// + 任意字符 + .jpg

![img](https://user-gold-cdn.xitu.io/2016/11/29/1e337fa1b28952765d0f60e834c884ea?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

## 匹配日期

```js
/^\d{4}[/-]\d{2}[/-]\d{2}$/
```

- \d表示匹配数字{4}表示匹配4次
- [/-]表示匹配/或者-中的一个

因此可以匹配到日期

改造下这个正则

```js
/^(\d{4})[/-](\d{2})[/-](\d{2})$/
```



![img](https://lc-api-gold-cdn.xitu.io/2910e185e9051c28efde.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



轻松的可以拿到 group#1 #2 #3 的内容，对应 `$1` `$2` `$3`，拿到匹配到的内容可以替换成新的内容，如下图所示

![img](https://lc-api-gold-cdn.xitu.io/1a40fca9e0e3e2f2f50d.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

# 正则表达式语法

## 1 修饰符 （三个 g i m）

修饰符与其他语法特殊，字面量方法声名的时候放到`//`后，构造函数声明的时候，作为第二个参数传入。整个正则表达式可以理解为正则表达式规则字符串+修饰符

- g：global 执行一个全局匹配
- i：ignore case执行一个不区分大小写的匹配
- m: multiple lines多行匹配

## 2 元字符

正则表达式由两种基本字符组成：

- 原义字符

- 非打印字符

- 元字符

  ```js
  * + ? $ ^ . | \ ( ) { } [ ]
  ```
  
  

## 特殊字符

> 参考https://www.runoob.com/regexp/regexp-syntax.html

所谓特殊字符，就是一些有特殊含义的字符，如上面说的 **runoo\*b** 中的 *****，简单的说就是表示任何字符串的意思。如果要查找字符串中的 ***** 符号，则需要对 ***** 进行转义，即在其前加一个 **\**，**runo\*ob** 匹配字符串 **runo\*ob**。

许多元字符要求在试图匹配它们时特别对待。若要匹配这些特殊字符，必须首先使字符"转义"，即，将反斜杠字符**\** 放在它们前面。下表列出了正则表达式中的特殊字符：

| 特别字符 | 描述                                                         |
| :------- | :----------------------------------------------------------- |
| $        | 匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 '\n' 或 '\r'。要匹配 $ 字符本身，请使用 \\$。 |
| ( )      | 标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用\ \( 和 \\)。 |
| *        | 匹配前面的子表达式零次或多次。要匹配 * 字符，请使用 \\*。    |
| +        | 匹配前面的子表达式一次或多次。要匹配 + 字符，请使用 \\+。    |
| .        | 匹配除换行符 \n 之外的任何单字符。要匹配 . ，请使用 \\. 。   |
| [        | 标记一个中括号表达式的开始。要匹配 [，请使用 \\[。           |
| ?        | 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用 \\?。 |
| \        | 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， 'n' 匹配字符 'n'。'\n' 匹配换行符。序列 '\\' 匹配 "\"，而 '\\(' 则匹配 "("。 |
| ^        | 匹配输入字符串的开始位置，除非在方括号表达式中使用，当该符号在方括号表达式中使用时，表示不接受该方括号表达式中的字符集合。要匹配 ^ 字符本身，请使用 \^。 |
| {        | 标记限定符表达式的开始。要匹配 {，请使用 \\{。               |
| \|       | 指明两项之间的一个选择。要匹配 \|，请使用 \\|。              |

## 3. 原义字符

这个没什么好解释的，我们一直在举例的 /is/ 匹配字符串'is'

`\`将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，`n`”匹配字符“`n`”。“`\n`”匹配一个换行符。序列“`\\`”匹配“`\`”而“`\(`”则匹配“`(`”。



##### 5. 字符类 []

在前面的手机号正则例子🌰中，我们已经使用过[]  `/^1[34578][0-9]{9}$/` :  `[34578]`表示34578任意一个数字即可。在日期匹配与分组替换例子🌰中 `/^\d{4}[/-]\d{2}[/-]\d{2}$/` 表示符合 `／`  `-`  都可以



![img](https://lc-api-gold-cdn.xitu.io/dbd465a091a35072deef.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



##### 6. 字符类取反 [^]

表示不属于此类



![img](https://user-gold-cdn.xitu.io/2016/11/29/eb573baedf3ae2c4d6255070b80d2303?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



空格也不属于，好多狗🐶

##### 7. 范围类[-]

正则表达式支持一定范围规则比如 `[a-z]` `[A-Z]`  `[0-9]`  可以连写[a-z0-9] 如果你只是想匹配`-`在 范围类最后加`-`即可。请看实例。



![img](https://user-gold-cdn.xitu.io/2016/11/30/7dfdc4fb6d063e1c2918b132cd1f78fe?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

##### 8. 预定义类

常用为了方便书写

| 字符 | 等价类            | 含义                             |
| ---- | ----------------- | -------------------------------- |
| `.`  | `[^\n\r]`         | 除了回车符和换行符之外的所有字符 |
| `\d` | `[0-9]`           | 数字字符                         |
| `\D` | `[^0-9]`          | 非数字字符                       |
| `\s` | `[\t\n\x0B\f\r]`  | 空白符                           |
| `\S` | `[^\t\n\x0B\f\r]` | 非空白符                         |
| `\w` | `[a-zA-Z_0-9]`    | 单词字符（字母、数字、下划线）   |
| `\W` | `[^a-zA-Z_0-9]`   | 非单词字符                       |

有了这些预定义类，写一些正则就很方便了，比如我们希望匹配一个 ab+数字+任意字符 的字符串，就可以这样写了 `/ab\d./`

##### 9. 边界

| 字符 | 含义                               |
| ---- | ---------------------------------- |
| `^`  | 以xx开头                           |
| `$`  | 以xx结尾                           |
| `\b` | 单词边界，指[a-zA-Z_0-9]之外的字符 |
| `\B` | 非单词边界                         |

边界顾名思义即定义匹配的边界条件，上面基本都在前面的例子碰到了，这里演示下`\b`与`\B` 的区别



![img](https://user-gold-cdn.xitu.io/2016/11/29/fe3bba2938289b6c77b0b2072687027d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



##### 10. 量词

| 字符  | 含义                                    |
| ----- | --------------------------------------- |
| ?     | 出现零次或一次                          |
| *     | 出现零次或多次(任意次)                  |
| +     | 出现一次或多次（至少一次）              |
| {n}   | 对应零次或者n次                         |
| {n,m} | 至少出现n次但不超过m次                  |
| {n,}  | 至少出现n次(+的升级版)                  |
| {0,n} | 至多出现n次(其实就是{n,m} 方便记忆而已) |

如果没有量词，要匹配4位数字这样写就可以`/\d\d\d\d/`, 如果匹配50位100位呢？那不是要疯掉了？
有了量词，就可以这样写`/\d{100}/`, 量词的使用我们在手机号中使用过，表现在可视化中就是循环多少次。

凑一个上面都包含的实例`/\d?@\d*@\d+@\d{10}@\d{10,20}@\d{10,}@\d{0,10}/`



![img](https://lc-api-gold-cdn.xitu.io/92296621793c1e9b289e.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

##### 11.贪婪与懒惰（非贪婪）

正则表达式默认会匹配贪婪模式，什么是贪婪模式呢？如其名尽可能多的匹配。我们看个例子🌰。

```
/\d{3,6}/
```



![img](https://lc-api-gold-cdn.xitu.io/54f23af7ec7334fdf56b.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)





![img](https://lc-api-gold-cdn.xitu.io/00f41398667e7d54b4c6.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



贪婪模式下，匹配的了最多的情况。

与贪婪对应就是懒惰模式，懒惰对应的就是匹配的尽可能少的情况。如何开启懒惰模式？ 在量词后面加`?`。继续上面的例子

```
/\d{3,6}?/
```



![img](https://lc-api-gold-cdn.xitu.io/0232a2388ba315d4b197.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



如果想知道，正则表达式是如何匹配量词的，请看 [进阶正则表达式](https://link.juejin.cn/?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000000426455) 文中有介绍，正则是如何回溯的。

##### 12.分组与反向引用

分组，又称为子表达式。把正则表达式拆分成小表达式。概念枯燥，说个例子为嘛用分组：

**不分组 `/abc{2}/`** 



![img](https://lc-api-gold-cdn.xitu.io/20a5e736228756898ec0.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



量词仅作用到最后的`c`

**分组 `/(abc){2}/`**



![img](https://lc-api-gold-cdn.xitu.io/903fec7cc8e8f27b81e6.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



注意这里 group #1 

分组虽然和运算符`()` 很像，但是分组在正则表达式中，注意理解组的含义。经常有人滥用分组

`/^(http|https)/`   真的需要这样么？其实 `/^https?/`就可以了，你正则写的特别长的时候，会出现一堆没用的结果，看着都头疼吧。

分组往往和**反向引用**一起使用，别被概念吓到：当一个正则表达式被分组后，每个分组自动被赋予一个组号，一左到右分别是 `$1`   `$2`…

再把之前的例子拿出来

```
/^(\d{4})[/-](\d{2})[/-](\d{2})$/
```



![img](https://lc-api-gold-cdn.xitu.io/126a6de5f1367f9f4c5e.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



轻松的可以拿到 group#1 #2 #3 的内容，对应 `$1` `$2` `$3`

 

![img](https://lc-api-gold-cdn.xitu.io/1a40fca9e0e3e2f2f50d.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



如果在反向引用中不想捕获年该如何操作? 加上 `?:`即可

```
/^(?:\d{4})[/-](\d{2})[/-](\d{2})$/
```



![img](https://lc-api-gold-cdn.xitu.io/23ff76b527b991c29faf.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



##### 12.前瞻

⚠️ 这部分为进阶部分—选看

正则表达式中有前瞻（Lookahead）和后顾（Lookbehind）的概念，这两个术语非常形象的描述了正则引擎的匹配行为。需要注意一点，正则表达式中的前和后和我们一般理解的前后有点不同。一段文本，我们一般习惯把文本开头的方向称作“前面”，文本末尾方向称为“后面”。但是对于正则表达式引擎来说，因为它是从文本头部向尾部开始解析的（可以通过正则选项控制解析方向），因此对于文本尾部方向，称为“前”，因为这个时候，正则引擎还没走到那块，而对文本头部方向，则称为“后”，因为正则引擎已经走过了那一块地方。

⚠️注意：后顾性能损耗比较大，js只支持前瞻（知乎上看到的，具体原因不详）

上面的比较概念话，尝试用大白话讲讲，就说皇上选妃吧，先行条件得是美女吧，长得“如花”那样皇上可不要，漂亮这关过了，皇上想要这个美女也不行，皇室有规矩，必须是贵族血统。

那么“漂亮”就是正常的匹配，匹配到了，还得看看家室是不是贵族。"贵族"相当于前瞻条件

前瞻分两种一种是正向前瞻`(?=xxx)`, 另一种是负向前瞻`(?!xxx)`



![img](https://user-gold-cdn.xitu.io/2016/11/29/e87f20a523c62aca17da5d6fab21eff4.jpg?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



😂 是不是很简单？那我们来玩个好玩的。

题目：如何将'123456'转成货币带逗号的。'123,456'。这个是很常规格式化金额的需求。

如果在没有学习正则之前，我的思路是：

1. 字符串转数组
2. 反转数组
3. 每隔三个添加个逗号
4. 添加完了反转数组
5. 数组转字符串

好累～～～

今天学习了正则，可以一步到位 `'123456789'.replace(/(\d)(?=(?:\d{3})+$)/g, '$1,')`

到此为止正则的基本使用已经结束，后面一篇会分享一些正则的 「奇技淫巧」



链接：https://juejin.cn/post/6844903453836181517
